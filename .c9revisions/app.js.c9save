{"ts":1363954288643,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"\n/**\n * Module dependencies.\n */\n\nvar express = require('express')\n  , routes = require('./routes')\n  , user = require('./routes/user')\n  , http = require('http')\n  , path = require('path')\n  , reader = require('./routes/reader')\n  , socketio = require('socket.io')\n  , events = require('./modules/events');\n\nvar app = express();\n\napp.configure(function(){\n  app.set('port', 3000);\n  app.set('views', __dirname + '/views');\n  app.set('view engine', 'jade');\n  app.use(express.favicon());\n  app.use(express.logger('dev'));\n  app.use(express.bodyParser());\n  app.use(express.methodOverride());\n  app.use(app.router);\n  app.use(express.static(path.join(__dirname, 'public')));\n});\n\napp.configure('development', function(){\n  app.use(express.errorHandler());\n});\n\napp.get('/', routes.index);\napp.get('/users', user.list);\napp.get('/reader', reader.index);\n\n//http.createServer(app).listen(app.get('port'), function(){\n//  console.log(\"Express server listening on port \" + app.get('port'));\n//});\n\nsocketio.listen(app.listen(app.get('port')), function(){\n    console.log(\"Express server listening on port \" + app.get('port') + \" with socket.io\");\n}).sockets.on('connection', function(socket){\n    socket.on('load feeds', function(){\n        console.log('Call load feeds');\n        events.loadFeeds(function(feeds){\n           socket.emit('load feeds done', {feeds: feeds}); \n        });\n    });\n    \n    socket.on('load feed articles', function(data){\n        console.log('Call load feed articles');\n        events.loadFeedArticles(data.url, function(articles){\n            socket.emit('load feed articles done', {articles: articles});\n        });\n    });\n    \n    socket.on('add feed', function(data){\n        console.log('Call add feed');\n        events.addFeed(data.url, function(feed){\n            socket.emit('add feed done', {feed: feed});\n        });\n    });\n});\n\n\n"]],"start1":0,"start2":0,"length1":0,"length2":1867}]],"length":1867}
{"contributors":[],"silentsave":false,"ts":1363954307201,"patch":[[{"diffs":[[0,"articles"],[-1,"'"],[1,". url:%s', data.url"],[0,");\n     "]],"start1":1483,"start2":1483,"length1":17,"length2":35}]],"length":1885,"saved":false}
{"ts":1363955105566,"patch":[[{"diffs":[[0,"add feed"],[-1,"'"],[1,". url:%s', data.url"],[0,");\n     "]],"start1":1742,"start2":1742,"length1":17,"length2":35}]],"length":1903,"saved":false}
{"contributors":[],"silentsave":false,"ts":1364029287272,"patch":[[{"diffs":[[0,"ticles. "],[-1,"url"],[1,"feedId"],[0,":%s', da"]],"start1":1485,"start2":1485,"length1":19,"length2":22},{"diffs":[[0,"eedId:%s', data."],[-1,"url"],[1,"id"],[0,");\n        event"]],"start1":1494,"start2":1494,"length1":35,"length2":34},{"diffs":[[0,"ticles(data."],[-1,"url"],[1,"id"],[0,", function(a"]],"start1":1540,"start2":1540,"length1":27,"length2":26}]],"length":1904,"saved":false}
{"contributors":[],"silentsave":false,"ts":1364305294034,"patch":[[{"diffs":[[0,"    });\n"],[1,"    \n    socket.on('refresh feed articles', function(){\n        \n    });\n"],[0,"});\n\n\n"]],"start1":1890,"start2":1890,"length1":14,"length2":87}]],"length":1977,"saved":false}
{"ts":1364305314468,"patch":[[{"diffs":[[0,"cles', function("],[1,"feeds"],[0,"){\n        \n    "]],"start1":1935,"start2":1935,"length1":32,"length2":37}]],"length":1982,"saved":false}
{"ts":1364305333181,"patch":[[{"diffs":[[0,"s){\n        "],[1,"console.log('Call refresh feed articles.');"],[0,"\n    });\n});"]],"start1":1955,"start2":1955,"length1":24,"length2":67}]],"length":2025,"saved":false}
